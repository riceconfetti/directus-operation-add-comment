var e={id:"directus-operation-add-comment",handler:async({collection:e,comment_key:t,comment:a},{services:r,database:n,accountability:c,getSchema:i})=>{const{ActivityService:o}=r,l=new o({schema:await i({database:n}),accountability:c,knex:n});Array.isArray(t)||!1!==t.includes("[")||(t=[t]);const s=Array.isArray(t)?t:JSON.parse(Array.isArray(t));console.log(`Converted ${s}`);let u=[],m=null;for await(const t of s)try{m=await l.createOne({action:"comment",comment:a,user:c?.user??null,collection:e,ip:c?.ip??null,user_agent:c?.userAgent??null,origin:c?.origin??null,item:t}),u.push(m)}catch(e){return e}return u}};export{e as default};
